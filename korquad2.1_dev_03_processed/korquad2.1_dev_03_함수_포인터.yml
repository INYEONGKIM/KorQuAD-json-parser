categories:
- 함수_포인터
conversations:
- - c언어에서 함수 포인터를 사용하는 방법은?
  - <ul><li><i>func1</i>은 하나의 더블형 매개변수를 가지며 다른 더블형을 반환하고, 센티미터를 인치로 변환하는 역할을 한다.</li>\n<li><i>func2</i>는 정수형 그리고 상수 문자 배열에 대한 포인터를 가지며 문자에 대한 포인터를 반환하고, 문자 배열에서 주어진 문자의 첫 번째 발생에 대한 포인터를 반환하는 문자열 라이브러리 함수의 역할을 한다.<div><pre><span></span><span>#include</span> <span>&lt;stdio.h&gt;  /* for printf */</span><span></span>\n<span>#include</span> <span>&lt;string.h&gt; /* for strchr */</span><span></span>\n\n<span>double</span> <span>cm_to_inches</span><span>(</span><span>double</span> <span>cm</span><span>)</span> <span>{</span>\n	<span>return</span> <span>cm</span> <span>/</span> <span>2.54</span><span>;</span>\n<span>}</span>\n\n<span>int</span> <span>main</span><span>(</span><span>void</span><span>)</span> <span>{</span>\n	<span>double</span> <span>(</span><span>*</span><span>func1</span><span>)(</span><span>double</span><span>)</span> <span>=</span> <span>cm_to_inches</span><span>;</span>\n	<span>char</span> <span>*</span> <span>(</span><span>*</span><span>func2</span><span>)(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>int</span><span>)</span> <span>=</span> <span>strchr</span><span>;</span>\n	<span>printf</span><span>(</span><span>"%f %s"</span><span>,</span> <span>func1</span><span>(</span><span>15.0</span><span>),</span> <span>func2</span><span>(</span><span>"Wikipedia"</span><span>,</span> <span>'p'</span><span>));</span>\n		<span>/* prints "5.905512 pedia" */</span>\n        <span>return</span> <span>0</span><span>;</span>\n<span>}</span>\n</pre></div>다음의 프로그램은 함수 포인터를 두 함수들(<code>sin</code> or <code>cos</code>) 중 하나를 다른 함수(<code>compute_sum</code>, 함수의 <a>리만 적분</a>의 근사치를 계산한다)에서 간접적으로 작동시키기 위해 사용한다. 이 프로그램은 <code>main</code> 함수가 함수 <code>compute_sum</code>를 두 번 호출함으로써 작동하며, 처음 라이브러리 함수 <code>sin</code>에 대한 포인터를 전달하고, 두번째에는 <code>cos</code> 함수에 대한 포인터를 전달한다. 결과적으로 함수 <code>compute_sum</code>는 자신의 함수 포인터 <code>funcp</code> 를 여러 번 역참조하고, 작동된 함수 결과들을 더하고 결과인 sum을 반환하면서, 두 함수들 중 하나를 간접적으로 호출한다. 두 sum들은 <code>main</code>에 의해 표준 출력에 써진다.<div><pre><span></span><span>#include</span> <span>&lt;math.h&gt;</span><span></span>\n<span>#include</span> <span>&lt;stdio.h&gt;</span><span></span>\n\n<span>// Function taking a function pointer as an argument</span>\n<span>double</span> <span>compute_sum</span><span>(</span><span>double</span> <span>(</span><span>*</span><span>funcp</span><span>)(</span><span>double</span><span>),</span> <span>double</span> <span>lo</span><span>,</span> <span>double</span> <span>hi</span><span>)</span>\n<span>{</span>\n    <span>double</span>  <span>sum</span> <span>=</span> <span>0.0</span><span>;</span>\n\n    <span>// Add values returned by the pointed-to function '*funcp'</span>\n    <span>for</span> <span>(</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>;</span>  <span>i</span> <span>&lt;=</span> <span>100</span><span>;</span>  <span>i</span><span>++</span><span>)</span>\n    <span>{</span>\n        <span>double</span>  <span>x</span><span>,</span> <span>y</span><span>;</span>\n\n        <span>// Use the function pointer 'funcp' to invoke the function</span>\n        <span>x</span> <span>=</span> <span>i</span> <span>/</span> <span>100.0</span> <span>*</span> <span>(</span><span>hi</span> <span>-</span> <span>lo</span><span>)</span> <span>+</span> <span>lo</span><span>;</span>\n        <span>y</span> <span>=</span> <span>(</span><span>*</span><span>funcp</span><span>)(</span><span>x</span><span>);</span>\n        <span>sum</span> <span>+=</span> <span>y</span><span>;</span>\n    <span>}</span>\n    <span>return</span> <span>sum</span> <span>/</span> <span>101.0</span><span>;</span>\n<span>}</span>\n\n<span>int</span> <span>main</span><span>(</span><span>void</span><span>)</span>\n<span>{</span>\n    <span>double</span>  <span>(</span><span>*</span><span>fp</span><span>)(</span><span>double</span><span>);</span>      <span>// Function pointer</span>\n    <span>double</span>  <span>sum</span><span>;</span>\n\n    <span>// Use 'sin()' as the pointed-to function</span>\n    <span>fp</span> <span>=</span> <span>sin</span><span>;</span>\n    <span>sum</span> <span>=</span> <span>compute_sum</span><span>(</span><span>fp</span><span>,</span> <span>0.0</span><span>,</span> <span>1.0</span><span>);</span>\n    <span>printf</span><span>(</span><span>"sum(sin): %f</span><span>\n</span><span>"</span><span>,</span> <span>sum</span><span>);</span>\n\n    <span>// Use 'cos()' as the pointed-to function</span>\n    <span>fp</span> <span>=</span> <span>cos</span><span>;</span>\n    <span>sum</span> <span>=</span> <span>compute_sum</span><span>(</span><span>fp</span><span>,</span> <span>0.0</span><span>,</span> <span>1.0</span><span>);</span>\n    <span>printf</span><span>(</span><span>"sum(cos): %f</span><span>\n</span><span>"</span><span>,</span> <span>sum</span><span>);</span>\n    <span>return</span> <span>0</span><span>;</span>\n<span>}</span>\n</pre></div></li></ul>
- - 기능자는 어떤 타입의 객체인가?
  - 클래스
